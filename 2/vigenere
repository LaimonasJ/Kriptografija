from collections import defaultdict

sifras = unicode("""KTŠBA LEŽAŠ IHĖĮZ RIĖSD ČZJČI 
JAĖIK DRAKO ĮĄTĘB ZFLIU ĘYĄCI 
OFTĘH FAKGC ĄTĘJI JĘNČG MIĖŽČ 
ĮUSKK UBTKS JBJUF ODUFA ĖCCAH 
AYCŲO BSŽKD ĘGDDŪ ŠAGIJ SNZKS 
CSKČČ SKSGP ĮTVĖŽ LRDCG ZOĖIE 
ŠYGBE JTDĖĘ OĄCIU ŽOĮFT SBJSĘ 
NGBAI ĄTYŠĖ OCKPH LSGŽĮ SDĮVŲ 
YJIGC NHĘUH ĘKĘBU OCŽĮG MCYFU 
ĘIMFĘ DBŲĄC GYĖOK SDOĮT ĮHIĖĖ 
ACCJV BZCĘT AJVCĮ MAFOE HCĮRI 
KLJAF TCTPĮ BIKCI ĖIGSG DMKOK 
SKĮIU ĘKPGR GSĖDE RSŪSD ČJAYY 
TLGSS GZOIA IĮTĘG KYKTĘ JIRVH 
ŪĮOĮĄ TĘBZF LKCŪI ĄLĖOK JCYNZ 
ŪBSSF ĮČVCS DLŪIĘ KDFĘA GVMĖĮ 
OĮTDĮ GSAHJ ERVCF UHB   """, 'utf-8').replace('\n', '').replace(' ', '')
abc=unicode('AĄBCČDEĘĖFGHIĮYJKLMNOPRSŠTUŲŪVZŽ','utf-8')
print sifras
print abc

def freq(text):
    d = defaultdict(int)
    s=""
    for w in text:
        if w in abc:
            d[w] += 1                   
    for w in sorted(d, key=d.get, reverse=True):
        s+=w
    return s

t='TRRyyyIIU'
print(freq(t))

def friedm(text,k):
    textn=unicode("",'utf-8')
    for r in text:
        if r in abc:
            textn+=r
    l=len(textn)
    s=0
    for i in range(k,l):
        if textn[i]==textn[i-k] :
            s+=1
    return  1.*s/(l-k)  
t=unicode('PIGĄU KCLĘR ŽSOPĘ CKCIŲ ĖGACY ','utf-8')
print(friedm(t,2))

n=len(abc)
def guess(test, k, sifr): #test - dažniausių raidžių eilutė, k - spėjamas šifro raktas
    tst=unicode('','utf-8')
    for r in test:
        if r in abc:
            tst+=r    
    tstk=unicode('','utf-8')
    for r in tst:
        tstk+=abc[(abc.index(r)+k)%n]
    d = defaultdict(int)
    sifrn=unicode('','utf-8')
    for r in sifr:
        if r in abc: sifrn+=r
    for r in sifrn:
        if r in tstk: d[r]+=1
    kiek=len(sifrn)
    s=0
    for a in d.keys(): s+=d[a]
    return s/kiek
test=unicode('ABC','utf-8')
sifr=unicode('ABABABASSDDHHDKKKCCCCCLKLDKSJJSJSJLL','utf-8')
print guess(test,2,sifr)



n=len(abc)
def prepare(text): #remove non-ascii
    textn=unicode("", 'utf-8')
    for a in text:
        if a in abc:
            textn+=a
    return textn.upper()


def split(text,d):
    textn=prepare(text)
    tspl=['']*d
    n=len(textn)
    for i in range(0,n):
        tspl[i%d]+=textn[i]
    return tspl    
f=split(unicode('ABABABABABABČ', 'utf-8'),2)
print f[0],f[1]

def freq(text):
    d = defaultdict(int)
    s=""
    for w in text:
        if w in abc:
            d[w] += 1                   
    for w in sorted(d, key=d.get, reverse=True):
        s+=w
    return s

t='TRRyyyIIU'
print(freq(t))
